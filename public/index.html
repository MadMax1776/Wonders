<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="WonderApp">
<head>
  <meta charset="utf-8">
  <title></title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js" charset="utf-8"defer></script>
  <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZMcvDsdkxBtoQzfxSzgItGe_ePSPNaz4&callback=initMap">
  </script>
  <script>
  function initMap() {
    let map = new google.maps.Map(document.getElementById('map'),
    {zoom: 16, disableDefaultUI: true, center: {lat: 29.9792, lng: 31.1342}});
    var panorama = new google.maps.StreetViewPanorama(
      document.getElementById('streetview-map'), {
        position: { lat:29.9792, lng: 31.1342},
        pov: {
          heading: 180,
          pitch: 20
        }
      });
      map.setStreetView(panorama);
    }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZMcvDsdkxBtoQzfxSzgItGe_ePSPNaz4&callback=initMap">
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&family=Fjalla+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/app.css">
    <script src="/js/app.js" charset="utf-8"defer></script>
  </head>
  <body ng-controller="MyController as ctrl">

    <section class="section" ng-if="ctrl.loggedInUser === false">
      <h1 class="title is-1">World Wonders</h1>

      <h2 class="title is-2">Sign Up</h2>

      <div class="field is-horizontal box hero" width="600px">
        <div class="field-body">

          <form class="log" ng-submit= "ctrl.signup()">
            <div class="field">

              Username: <input class="input" type="text" ng-model="ctrl.signupUsername" /><br/>

              Password: <input class="input" type="password" ng-model="ctrl.signupPassword"/><br/>

              <div class="buttons has-addons is-centered">
                <button class="button is-light" type="submit">Submit</button>

              </div>
            </div>
          </form>
        </div>
      </div>

  <h2 class="title is-2">Log In</h2>
      <div class="field is-horizontal box hero" width="600px">
        <div class="field-body">


          <form class="log"  ng-submit="ctrl.login()">
            <div class="field">
              Username: <input class="input" type="text" ng-model="ctrl.loginUsername">
              Password: <input class="input" type="password" ng-model="ctrl.loginPassword">

              <div class="buttons has-addons is-centered">
              <button type="submit" class="button is-light">Login</button>

            </div>

          </div>

        </form>
      </div>
      </div>

    </section>

    <section ng-if="ctrl.loggedInUser !== false">
      <h2 class="title is-2">Welcome {{ctrl.loggedInUser.username}}!</h2>
      <button ng-click="ctrl.logout()" class="button is-danger is-inverted">Log Out</button>

      <div class="field is-horizontal box hero" width="600px">
        <div class="field-body">

      <form class="log" ng-submit="ctrl.createWonder()">
        <div class="field">
        Name: <input class="input" type="text" ng-model="ctrl.createForm.name" placeholder="Name"/><br>
        Country: <input class="input" type="text" ng-model="ctrl.createForm.country" placeholder="Country"/><br>
        Latitude: <input class="input" type="number" step="0.0001" ng-model="ctrl.createForm.latitude" placeholder="Latitude"/><br>
        Longitude: <input class="input" type="number" step="0.0001" ng-model="ctrl.createForm.longitude" placeholder="Longitude"/><br>

      <div class="buttons has-addons is-centered">
        <button type="submit" class="button is-danger is-inverted">Create Wonder Entry</button>
      </div>
    </div>
      </form>
    </div>
    </div>

<h3 class="title is-3">Your New Wonder</h3>
  <div class="is-size-3">
      <ul ng-repeat="wonder in ctrl.wonders">
        <li ng-mouseover="ctrl.moveMap(wonder)">
          Name:  {{wonder.name}} <br>
          County:{{wonder.country}} <br>
          Latitude: {{wonder.latitude}} <br>
        Longitude:  {{wonder.longitude}}<br>
        </li>
      </ul>
</div>

<h3 class="title is-3">Your list of Previous Wonders</h3>
    <div class="is-size-3">


        <ul>
          <li ng-repeat="wonder in ctrl.wonders">
            {{wonder.name}}
            {{wonder.description}}
            {{wonder.country}}
            {{wonder.latitude}}
            {{wonder.longitude}}
            <button ng-click="ctrl.deleteWonder(wonder)">Delete This Wonder</button>
          </li>
        </ul>
  </div>
    </section>
  </body>
  </html>
